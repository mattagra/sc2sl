<h1>Listing articles</h1>

<table>
  <% current_month = nil %>
  <% @articles.each do |article| %>
    <% unless current_month == article.created_at.month %>
      <tr>
        <td colspan="8"><h3><%= article.created_at.strftime("%B - %Y") %></h3></td>
      </tr>
      <% current_month = article.created_at.month %>
    <% end %>
    <tr>
      <td><strong><%= article.created_at.strftime("%M %d %Y") %> - </strong><%= link_to article.title, view_article_path(article) %> <%= ("[ " + (link_to "Edit", edit_article_path(article)) + " | " +  (link_to "Delete", article_path(article), :method => :delete, :confirm => "Do you want to delete this article?") + "]" ).html_safe if current_admin %></td>
    </tr>
    <tr>
      <td>Written by : <%= article.user.login %> | <%= pluralize(article.comments.count, 'comment') %></td>
    </tr>
  <% end %>
</table>

<br />
Page: <%=  paginate_links(@per_page, @current_page, @articles_count, request.path, params) %>


<% if can? :create, Article %>
  <%= link_to 'New Article', new_article_path %>
<% end %>